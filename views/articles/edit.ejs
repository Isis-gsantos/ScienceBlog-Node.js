<%- include ('../partials/header.ejs') %>
<%- include ('../partials/navbar.ejs') %>

<body>
    <section class="container">
        <article class="content">
            <h2>Article Edit</h2>
            <hr>

            <form method="POST" action="/articles/update" enctype="multipart/form-data" class="form">
                <input type="hidden" value="<%= article.id %>" name="id">
                <input type="text" name="title" placeholder="Set the article title" value="<%= article.title %>" class="max-width title" required> <br>
                <label for="imageUpload">Upload an image</label> <br>
                <input type="file" id="imageUpload" name="imagePath" accept="image/png, image/jpeg" class="imageUpload" value="<%= article.imagePath %>">
                <textarea name="body" id="article"><%= article.body %></textarea>
                    <label for="">Category</label>
                    <select class="max-width" name="category">
                        <% categories.forEach((category) => { %>
                            <% if(category.id == article.categoryId) { %>
                                <option value="<%= category.id %>" selected><%= category.title %></option>
                            <% } else { %>
                                <option value="<%= category.id %>"><%= category.title %></option>
                            <% } %>
                            
                        <% }) %>
                    </select> <br>
                <button type="submit" class="btn btn-fontsize">Update</button>
            </form>
        </article>
    </section>
</body>

<%- include ('../partials/footer.ejs') %>

<script src="/tinymce/tinymce.min.js"></script>
<script>
    tinymce.init({
        selector: "#article",
        plugins: [
            'advlist autolink link image lists print preview hr searchreplace wordcount fullscreen insertdatetime media save table paste emoticons' 
        ]
    });
</script>